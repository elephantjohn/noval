# 追妻流/后悔流虐文小说生成器 📖💔

## 🎯 小说特点

- **类型**：现代都市追妻火葬场
- **风格**：虐恋情深，先虐后甜
- **篇幅**：15章完整剧情（可调整）
- **核心**：男女主从误会分离到破镜重圆的情感历程

## 📚 剧情大纲

### 第一阶段：虐心离别（第1-3章）
- 误会产生，信任崩塌
- 女主心死，决绝离开
- 男主还在自以为是

### 第二阶段：各自煎熬（第4-6章）
- 分离后的空虚与思念
- 表面坚强，内心痛苦
- 意外重逢，暗流涌动

### 第三阶段：真相渐明（第7-9章）
- 误会逐渐解开
- 男主悔恨交加
- 开始疯狂寻找女主

### 第四阶段：追妻之路（第10-12章）
- 男主各种追求手段
- 女主心防逐渐松动
- 内心挣扎与纠结

### 第五阶段：破镜重圆（第13-15章）
- 最后的考验
- 真心得到证明
- 重新在一起，甜蜜结局

## 🚀 快速开始

### 1. 配置环境

在项目根目录创建 `.env` 文件：

```bash
# 百度文心API密钥（必需）
BAIDU_API_KEY=你的API密钥
BAIDU_SECRET_KEY=你的SECRET密钥

# 文本审核API密钥（可选）
TEXT_API_KEY=你的审核API密钥
TEXT_SECRET_KEY=你的审核SECRET密钥
```

### 2. 安装依赖

```bash
pip install -r requirements.txt
```

### 3. 运行生成器

#### 方式一：使用快速启动脚本（推荐）
```bash
python run_romance_novel.py
```

#### 方式二：使用模块运行
```bash
python -m novel_runner.runner_romance
```

#### 方式三：自定义参数
```bash
python -m novel_runner.runner_romance \
  --chapters 15 \
  --temperature 0.9 \
  --start-chapter 1
```

## 📝 参数说明

- `--chapters`：生成章节数（默认15章）
- `--temperature`：创造性参数（默认0.9，追妻流需要更高的情感表现力）
- `--top-p`：采样参数（默认0.92）
- `--max-tokens`：每章最大字数（默认4600）
- `--start-chapter`：从第几章开始（用于续写）
- `--dry-run`：测试模式，不调用API
- `--quiet`：静默模式
- `--wait-seconds`：章节间等待时间（默认60秒）

## 📁 输出结构

```
outputs_romance/
├── chapters/              # 章节文件
│   ├── 第1章-决绝离婚.md
│   ├── 第2章-心如死灰.md
│   ├── 第3章-各奔东西.md
│   └── ...
├── summaries/             # 章节概要
├── logs/                  # 生成日志
│   ├── chapter_01.raw.txt
│   ├── censor_01.json
│   └── ...
├── story_state/           # 故事状态（人物、情感线）
└── 追妻流_全文.md         # 合并的完整小说
```

## 👥 主要人物设定

### 男主：陆景深
- 32岁，跨国集团总裁
- 性格：冷漠霸道→深情悔恨
- 成长：从自负到觉醒，从伤害到守护

### 女主：苏念
- 28岁，独立设计师
- 性格：坚强善良，重感情
- 秘密：怀孕/疾病/身世

### 男配：顾北辰
- 30岁，医生/律师
- 温柔守护者，衬托男主

### 女配：沈雨薇
- 29岁，白月光/前女友
- 制造误会的关键人物

## 🎭 情感设计

### 虐点设置
- 误会导致的伤害
- 错过与遗憾
- 身份/疾病的秘密
- 第三者的介入

### 甜点设置
- 回忆中的美好
- 男主的改变与成长
- 守护与付出
- 最终的相守

## ⚙️ 高级功能

### 1. 内容审核
配置 `TEXT_API_KEY` 后会自动：
- 审核每章内容
- 不合规内容自动修正（最多3次）
- 审核失败的章节会标记文件名

### 2. 智能命名
- 使用 ernie-4.5-turbo-128k 分析章节内容
- 自动生成贴合剧情的章节标题

### 3. 状态管理
- 自动保存人物情感状态
- 记录剧情发展脉络
- 支持断点续写

## 📖 写作技巧

系统会自动运用以下技巧：
1. **细节描写**：通过动作、表情展现内心
2. **对话设计**：符合人物性格和情绪
3. **节奏控制**：虐与甜的平衡
4. **情感递进**：层层深入的情感变化
5. **环境烘托**：用环境描写强化氛围

## ❓ 常见问题

### Q: 生成的内容不够虐？
A: 可以调高 temperature 到 0.95，让情感表达更强烈

### Q: 想要更长的剧情？
A: 使用 `--chapters 20` 或更多，系统会自动调整节奏

### Q: 如何续写？
A: 使用 `--start-chapter 10` 从第10章开始续写

### Q: 审核总是失败？
A: 检查是否涉及敏感内容，系统会自动尝试修正

## 💡 创作建议

1. **第1-3章**要虐得彻底，让读者心疼女主
2. **第4-6章**展现双方的痛苦，不要只虐女主
3. **第7-9章**真相揭露要有冲击力
4. **第10-12章**追妻要真诚，不能太容易
5. **第13-15章**甜蜜但不能太突兀，要水到渠成

## 🔗 参考资料

- 参考作品：[知乎专栏](https://www.zhihu.com/market/paid_column/1799411546402746368)
- 小说类型：追妻火葬场、破镜重圆、虐恋情深

---

**开始创作你的追妻流虐文吧！让读者又虐又甜，欲罢不能！** 💔❤️